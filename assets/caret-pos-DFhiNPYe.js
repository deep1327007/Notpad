var P=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap"],C=function(t,r){var i=document.createElement("div"),a=function(){var n={position:"absolute",left:-9999,top:0,zIndex:-2e3};return t.tagName==="TEXTAREA"&&P.push("width"),P.forEach(function(e){n[e]=getComputedStyle(t)[e]}),n},g=function(n){var e=a();Object.keys(e).forEach(function(o){i.style[o]=e[o]}),i.innerHTML=n,t.parentNode.insertBefore(i,t.nextSibling)},s=function(){var n=i.ownerDocument.getElementById("caret-position-marker"),e={left:n.offsetLeft,top:n.offsetTop,height:n.offsetHeight};return i.parentNode.removeChild(i),e};return g(r),{rect:s}};function y(l){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?y=function(t){return typeof t}:y=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(l)}var S=function(t){return t.contentEditable?t.contentEditable==="true":t.getAttribute("contenteditable")==="true"},O=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.customPos,i=t.iframe,a=t.noShadowCaret;return i?{iframe:i,window:i.contentWindow,document:i.contentDocument||i.contentWindow.document,noShadowCaret:a,customPos:r}:{window,document,noShadowCaret:a,customPos:r}},R=function(t,r){var i=window,a=document,g=t.getBoundingClientRect(),s=a.documentElement,c=i.pageXOffset||s.scrollLeft,n=i.pageYOffset||s.scrollTop;return{top:g.top+n,left:g.left+c}},E=function(t){return y(t)==="object"&&t!==null},T=function(t,r){var i=function(){return t.selectionStart},a=function(n){return t.setSelectionRange(n,n),t},g=function(n){var e=R(t),o=s(n);return{top:e.top+o.top+r.document.body.scrollTop,left:e.left+o.left+r.document.body.scrollLeft,height:o.height}},s=function(n){var e=function(h){var v=h.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>");return v};(r.customPos||r.customPos===0)&&(n=r.customPos);var o=n===void 0?i():n,f=t.value.slice(0,o),u=t.value.slice(o),p='<span style="position: relative; display: inline;">'.concat(e(f),"</span>");p+='<span id="caret-position-marker" style="position: relative; display: inline;">|</span>',p+='<span style="position: relative; display: inline;">'.concat(e(u),"</span>");var m=C(t,p),d=m.rect();return d.pos=i(),d};return{getPos:i,setPos:a,getOffset:g,getPosition:s}},B=function(t,r){var i=function(e){var o=r.window.getSelection();if(o){var f=0,u=!1,p=function m(d,b){for(var h=0;h<b.childNodes.length;h++){var v=b.childNodes[h];if(u)break;if(v.nodeType===3)if(f+v.length>=d){u=!0;var w=r.document.createRange();w.setStart(v,d-f),o.removeAllRanges(),o.addRange(w);break}else f+=v.length;else m(e,v)}};p(e,t)}return t},a=function(){var e=s(),o={height:0,left:0,right:0};if(!e)return o;var f=r.customPos||r.customPos===0;if(e.endOffset-1>0&&e.endContainer!==t||f){var u=e.cloneRange(),p=f?r.customPos:e.endOffset;u.setStart(e.endContainer,p-1<0?0:p-1),u.setEnd(e.endContainer,p);var m=u.getBoundingClientRect();o={height:m.height,left:m.left+m.width,top:m.top},u.detach()}if((!o||o&&o.height===0)&&!r.noShadowCaret){var d=e.cloneRange(),b=r.document.createTextNode("|");d.insertNode(b),d.selectNode(b);var h=d.getBoundingClientRect();o={height:h.height,left:h.left,top:h.top},b.parentNode.removeChild(b),d.detach()}if(o){var v=r.document.documentElement;o.top+=r.window.pageYOffset-(v.clientTop||0),o.left+=r.window.pageXOffset-(v.clientLeft||0)}return o},g=function(){var e=a(),o=c(),f=t.getBoundingClientRect(),u={top:f.top+r.document.body.scrollTop,left:f.left+r.document.body.scrollLeft};return e.left-=u.left,e.top-=u.top,e.pos=o,e},s=function(){if(r.window.getSelection){var e=r.window.getSelection();return e.rangeCount>0?e.getRangeAt(0):null}},c=function(){var e=s(),o=e.cloneRange();o.selectNodeContents(t),o.setEnd(e.endContainer,e.endOffset);var f=o.toString().length;return o.detach(),f};return{getPos:c,setPos:i,getPosition:g,getOffset:a,getRange:s}},L=function(t,r){return S(t)?B(t,r):T(t,r)},N=function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=i;E(r)&&(a=r,r=null);var g=O(a),s=L(t,g);return r||r===0?s.setPos(r):s.getPosition()};export{N as p};
